# モンスター ドメインモデル

このドキュメントは、**Monster** 関連のコアとなるドメインモデルについて説明します。モンスターはダンジョン内でのエネミーとして、またプレイヤーが捕獲して管理する対象として機能します。

## コアコンセプト

モンスターシステムは、ダンジョンに配置される野生のモンスターと、プレイヤーによって捕獲されたモンスターの双方を管理します。モンスターは種族ごとの基本性能を持ち、個体ごとに状態（HP、経験値、状態異常等）が管理されます。

---

## 主要なドメインオブジェクト

### `MonsterDomain`
- **説明:** モンスターの「種族」としての基本情報を定義します。
- **主要なプロパティ:**
    - `id`: 種族の一意な識別子（例：「スライム」「オーク」）。
    - `name`: モンスターの名称。
    - `baseHp`: 基本体力。
    - `baseAtk`: 基本攻撃力。
    - `baseDef`: 基本防御力。
    - `display`: マップ上で表示される文字（例：スライムは `s`）。
    - `expValue`: 倒した際に得られる経験値。
    - `type`: モンスターの属性やカテゴリ（例：ドラゴン系、アンデッド系）。

### `MonsterInstanceDomain`
- **説明:** 特定のモンスター個体を表します。ダンジョン内の野生モンスター、またはプレイヤーが所持しているモンスターとして存在します。
- **主要なプロパティ:**
    - `instanceId`: 個体の一意な識別子。
    - `monsterId`: `MonsterDomain` の ID（種族 ID）。
    - `level`: 現在のレベル。
    - `currentHp`: 現在の体力。
    - `statusEffects`: 付与されている状態異常のリスト。
    - `ownerId`: 所有しているプレイヤーの ID（捕獲済みの場合）。
    - `isWild`: 野生状態かどうかを示すフラグ。

### `MonsterCoordinateDomain`
- **説明:** ダンジョンのフロア上におけるモンスターの位置を保持します。
- **プロパティ:**
    - `position`: モンスターの座標 (`Coordinate`)。
    - `instanceId`: モンスターのインスタンス ID。

---

## モジュール間連携

### 1. Dungeon モジュールとの連携
- ダンジョンのフロア生成時、`MonsterDomain` に基づいて野生モンスターが生成され、`FloorDomain` の `monsterList`（後述の拡張）に配置されます。
- プレイヤーの移動に伴い、モンスターの AI（移動・攻撃ロジック）が実行されます。

### 2. BookOfAdventure モジュールとの連携
- プレイヤーがモンスターを捕獲した場合、そのモンスターの `MonsterInstanceDomain` はプレイヤーの所持モンスターとして `BookOfAdventure` に保存されます。
- 繁殖（Breeding）によって新しいモンスターが生成される際も、このモジュールを通じて永続化されます。

### 3. Combat システムとの連携
- 戦闘発生時、`MonsterInstanceDomain` のステータスと `MonsterDomain` の基本性能を用いてダメージ計算が行われます。
- モンスターの死亡時、プレイヤーへの経験値付与やアイテムドロップの判定が行われます。

---

## 今後の拡張
- **モンスター固有スキル**: 種族ごとに異なる特殊能力（火を吹く、分裂するなど）。
- **進化系譜**: 一定のレベルや条件で別の種族に変化する仕組み。
- **忠誠度**: 捕獲したモンスターのプレイヤーに対する懐き具合。
