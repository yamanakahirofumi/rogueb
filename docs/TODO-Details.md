# 検討事項・TODOリスト

本プロジェクトの開発において検討が必要な事項や、今後実装予定のタスク一覧です。
記述ルールについては [TODOリストの書き方ルール](tech/TODO-Rule.md) を参照してください。

---

## 1. 技術面
技術スタック、アーキテクチャ、パフォーマンスに関する検討事項です。

### [ ] モジュール間通信の最適化
- **概要**: 現在の REST ベースの通信におけるオーバーヘッドの評価と、必要に応じた最適化（gRPCや共有メモリの検討）。
- **検討内容**:
    - 現状のリアクティブスタックでのスループット計測。
    - サービス間でのデータ重複の排除。

### [ ] セーブデータの整合性確保
- **概要**: 複数サービス（Dungeon, Objects, BookOfAdventure）にまたがる状態更新時のトランザクション管理。
- **検討内容**:
    - 分散トランザクション（Sagaパターン等）の導入要否。
    - 異常終了時のリカバリプロセスの設計。

---

## 2. ゲームデザイン面
ゲーム性、バランス、世界観に関する検討事項です。

### [ ] ダンジョン生成アルゴリズムの多様化
- **概要**: 現在の生成ロジックに加え、洞窟型、迷路型、大部屋型などのバリエーション追加。
- **検討内容**:
    - 各フロアタイプに応じた生成アルゴリズムの選定。
    - 難易度曲線に合わせたタイル配置ルールの策定。
    - **人間が考えるべきこと**: プレイヤーが「探索していて楽しい」と感じる構造の言語化とルールへの落とし込み。

### [ ] アイテムの識別システムの導入
- **概要**: 未識別のアイテム（指輪、巻物等）を拾った際の挙動と、識別手段の実装。
- **検討内容**:
    - 識別前後のアイテム名の表示形式。
    - 識別アイテム（識別ボタン、鑑定の巻物等）の仕様策定。

---

## 3. アセット・リソース面
UI/UX、画像、音声に関する検討事項です。

### [ ] JavaFX による描画エンジンの構築
- **概要**: `Display` モジュールにおける Canvas を使用した高効率なタイル描画の実装。
- **検討内容**:
    - タイルセット（スプライトシート）の管理形式。
    - ビューポート（画面内表示領域）のスクロール制御。

---

## 4. 実装時の詳細事項
開発中に発見された具体的な課題です。

### [ ] MongoDB のインデックス最適化
- **概要**: `Objects` や `Dungeon` モジュールにおける検索クエリの高速化。
- **検討内容**:
    - 座標検索（2D Index）の活用。
    - 履歴データ（ObjectHistory）の肥大化対策。

---

## 5. 人間が主導すべき設計・調整面
AIによる生成が困難な、感性やバランス調整が必要な事項です。

### [ ] プレイ感覚の微調整（手触り）
- **概要**: 移動のレスポンス、アイテム拾得時の演出、攻撃のヒットストップなどの「手触り」の向上。
- **検討内容**:
    - アニメーションのフレーム数調整。
    - 効果音（SE）の挿入タイミング。
    - **人間が考えるべきこと**: 数値化しにくい「動かしていて気持ちいい」という感覚の追求。
